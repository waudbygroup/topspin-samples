<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NMR Sample Manager for TopSpin</title>
    <link rel="stylesheet" href="css/docs.css">
</head>

<body>
    <header class="header">
        <div class="header-content">
            <h1>NMR Sample Manager for TopSpin</h1>
            <nav class="nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="installation.html" class="nav-link active">Installation</a>
                <a href="app.html" class="nav-link">The Samples App</a>
                <a href="commands.html" class="nav-link">TopSpin Commands</a>
                <a href="https://nmr-samples.github.io/" class="nav-link">Ecosystem</a>
                <a href="https://waudbylab.org/" class="nav-link">Waudby Lab</a>
                <a href="https://github.com/nmr-samples/topspin" aria-label="GitHub repository"
                    title="GitHub repository">
                    <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0016 8c0-4.42-3.58-8-8-8z" />
                    </svg>
                </a>
            </nav>
        </div>
    </header>

    <div class="content">
        <h1>Installation</h1>

        <h2>1. Clone the Repository</h2>

        <p>Choose a location where you have write permissions — your home directory for
            single-user installations, or a shared lab directory for multi-user facilities.
            You <strong>cannot</strong> install within TopSpin's own
            <code>/opt/topspin...</code> directories.
        </p>

        <pre><code>cd ~
git clone https://github.com/nmr-samples/topspin.git</code></pre>

        <p>If you don't have git, download the repository as a
            <a href="https://github.com/nmr-samples/topspin/archive/refs/heads/main.zip">ZIP file</a>
            and extract it.
        </p>

        <h2>2. Configure TopSpin's Python Path</h2>

        <p>In TopSpin, type <code>setres</code> to open the Resource Editor. Navigate to
            <strong>Directories → Manage source directories for edpul, edau, etc.</strong>
            In the popup, select the <strong>Jython Programs</strong> tab and add the full
            absolute path to your <code>topspin/src</code> directory (e.g.
            <code>/home/username/topspin/src</code> or
            <code>/Users/username/topspin/src</code> on macOS).
        </p>

        <!-- setres screenshot -->
        <img src="images/setres.png" alt="TopSpin setres configuration screenshot" class="screenshot">

        <p>Save and restart TopSpin.</p>

        <h2>3. Verify</h2>

        <p>Type <code>samples</code> in TopSpin's command line. The Sample Manager window
            should appear, showing a timeline of your experiments.</p>

        <!-- samples app screenshot -->
        <img src="images/app-screenshot.png" alt="TopSpin samples app screenshot" class="screenshot">

        <h2>4. Configure root directories</h2>

        <p>In the samples app, click the <strong>Settings</strong>
            button in the bottom-left corner and add your root directories (e.g. <code>/home/user/nmr-data</code>
            or <code>/Users/user/nmr-data</code>). These are the directories where the app searches for samples to
            catalogue.
        </p>
        <img src="images/settings-root-directories.png" alt="Settings form screenshot showing root directories field"
            class="screenshot">

        <h2>Updating</h2>

        <p>The app checks for updates automatically on startup (if the spectrometer is
            online).</p>
        <img src="images/updates.png" alt="Update notification screenshot" class="screenshot">
        <p>To update:</p>

        <pre><code>cd /path/to/topspin
git pull</code></pre>

        <p>Restart TopSpin to load the updated code.</p>

        <h2>Multi-User Installations</h2>

        <p>Install in a shared location accessible to all users. Each user then adds the shared path to their own
            TopSpin configuration via <code>setres</code>.
        </p>

        <h2>Uninstallation</h2>

        <p>Remove the Sample Manager path from <code>setres</code>, save, and restart
            TopSpin. Optionally delete the <code>topspin</code> directory. Your sample
            metadata JSON files are not affected — they remain in your data directories.</p>

    </div>
</body>

</html>